# è¡€åœ§ç®¡ç†ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³

Rails 7.1.5.2 + Ruby 3.3.9 + PostgreSQL + Dockerç’°å¢ƒã§æ§‹ç¯‰ã•ã‚ŒãŸã€æ‚£è€…ãƒ»åŒ»ç™‚å¾“äº‹è€…ãƒ»ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã«ã‚ˆã‚‹å½¹å‰²åˆ†æ‹…å‹ã®è¡€åœ§ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚

## ç‰¹å¾´

### ğŸ¯ å½¹å‰²åˆ†æ‹…ã‚·ã‚¹ãƒ†ãƒ 
- **æ‚£è€…**: è¡€åœ§è¨˜éŒ²ã®å…¥åŠ›ãƒ»é–²è¦§
- **åŒ»ç™‚å¾“äº‹è€…**: æ‚£è€…ç®¡ç†ã€è¡€åœ§è¨˜éŒ²ç®¡ç†ã€ç—…é™¢ç®¡ç†
- **ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ»ç—…é™¢ãƒ»å½¹å‰²ã®ç®¡ç†

### ğŸ“Š ä¸»ãªæ©Ÿèƒ½
- è¡€åœ§è¨˜éŒ²ã®ç™»éŒ²ãƒ»ç·¨é›†ãƒ»å‰Šé™¤ãƒ»ä¸€è¦§è¡¨ç¤º
- è¡€åœ§æ¨ç§»ã‚°ãƒ©ãƒ•è¡¨ç¤ºï¼ˆChart.jsä½¿ç”¨ï¼‰
  - æœŸé–“é¸æŠæ©Ÿèƒ½ï¼ˆå…¨æœŸé–“ãƒ»1ãƒ¶æœˆãƒ»1é€±é–“ï¼‰
  - è¡€åœ§ãƒ»è„ˆæ‹ã®ãƒ©ã‚¤ãƒ³ã‚°ãƒ©ãƒ•è¡¨ç¤º
  - ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ
- æ‚£è€…ç®¡ç†ï¼ˆåŒ»ç™‚å¾“äº‹è€…ã«ã‚ˆã‚‹ï¼‰
- ç—…é™¢ç®¡ç†
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã«ã‚ˆã‚‹ï¼‰
- å½¹å‰²ãƒ»æ¨©é™ç®¡ç†
  - å¤šå¯¾å¤šé–¢é€£ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ â†” å½¹å‰² â†” ç—…é™¢ï¼‰
  - æ¨©é™ãƒ¬ãƒ™ãƒ«ç®¡ç†ï¼ˆä¸€èˆ¬/ç®¡ç†è€…ï¼‰
  - å½¹å‰²åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
- æ‚£è€…ã‚¹ã‚¿ãƒƒãƒ•å‰²ã‚Šå½“ã¦æ©Ÿèƒ½
- ç¢ºèªç”»é¢ä»˜ãã®å®‰å…¨ãªãƒ‡ãƒ¼ã‚¿æ“ä½œ
- å®Œå…¨æ—¥æœ¬èªå¯¾å¿œUI

### ğŸ—ï¸ æŠ€è¡“æ§‹æˆ
- **Backend**: Ruby on Rails 7.1.5.2
- **Runtime**: Ruby 3.3.9
- **Database**: PostgreSQL
- **Frontend**: Bootstrap 5.3.2, Chart.js 3.9.1, Hotwire/Turbo/Stimulus
- **Authentication**: Devise + devise-i18n
- **Container**: Docker & Docker Compose
- **Testing**: RSpec + Factory Bot + Capybara
- **Development Tools**: RuboCop, Bullet, Better Errors, Brakeman

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ–¹æ³•

### å‰ææ¡ä»¶
- Docker & Docker Compose ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. ãƒªãƒã‚¸ãƒˆãƒªã‚’ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone <repository-url>
cd è¡€åœ§ç®¡ç†app3
```

2. Docker Compose ã§ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
```bash
docker-compose up -d
```

3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
```bash
docker-compose exec web rails db:create
docker-compose exec web rails db:migrate
docker-compose exec web rails db:seed
```

4. ãƒ–ãƒ©ã‚¦ã‚¶ã§ã‚¢ã‚¯ã‚»ã‚¹
```
http://localhost:3000
```

### åˆæœŸãƒ‡ãƒ¼ã‚¿
- ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒä½œæˆã•ã‚Œã¾ã™
- æ‚£è€…ã€åŒ»å¸«ã€çœ‹è­·å¸«ã€è–¬å‰¤å¸«ãªã©ã®å½¹å‰²ãƒ‡ãƒ¼ã‚¿
- ã‚µãƒ³ãƒ—ãƒ«ç—…é™¢ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€å½¹å‰²å‰²ã‚Šå½“ã¦ãƒ‡ãƒ¼ã‚¿
- ãƒ†ã‚¹ãƒˆç”¨ã®è¡€åœ§è¨˜éŒ²ãƒ‡ãƒ¼ã‚¿

## åˆ©ç”¨æ–¹æ³•

### ãƒ­ã‚°ã‚¤ãƒ³æƒ…å ±ï¼ˆåˆæœŸãƒ‡ãƒ¼ã‚¿ï¼‰

#### ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…
- **ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹**: admin@system.com
- **ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰**: admin123

#### ãƒ†ã‚¹ãƒˆç”¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆé–‹ç™ºç’°å¢ƒã®ã¿ï¼‰
- **æ‚£è€…**: patient@example.com (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: password)
- **åŒ»å¸«**: doctor@example.com (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: password)
- **çœ‹è­·å¸«**: nurse@example.com (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: password)
- **åŒ»ç™‚äº‹å‹™**: clerk@example.com (ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: password)

### ä¸»ãªç”»é¢
- `/` - ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ï¼ˆãƒ­ã‚°ã‚¤ãƒ³ç”»é¢ã¸ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆï¼‰
- `/admin` - ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/medical_staff` - åŒ»ç™‚å¾“äº‹è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `/charts` - è¡€åœ§æ¨ç§»ã‚°ãƒ©ãƒ•ï¼ˆæ‚£è€…ã®ã¿ï¼‰
- `/blood_pressure_records` - è¡€åœ§è¨˜éŒ²ä¸€è¦§
- `/profile` - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç·¨é›†

## é–‹ç™ºè€…å‘ã‘æƒ…å ±

### ãƒ­ãƒ¼ã‚«ãƒ«é–‹ç™ºç’°å¢ƒ
```bash
# Railsã‚µãƒ¼ãƒãƒ¼èµ·å‹•
docker-compose exec web rails s

# ã‚³ãƒ³ã‚½ãƒ¼ãƒ«èµ·å‹•
docker-compose exec web rails c

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
docker-compose exec web rails test
```

### ä¸»è¦ãªGem
- `devise` + `devise-i18n` - ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ï¼ˆæ—¥æœ¬èªå¯¾å¿œï¼‰
- `kaminari` - ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
- `bootstrap` (~5.3) - UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- `sassc-rails` - SCSSã‚³ãƒ³ãƒ‘ã‚¤ãƒ«
- `turbo-rails` + `stimulus-rails` - Hotwireãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- `rspec-rails` + `factory_bot_rails` + `faker` - ãƒ†ã‚¹ãƒˆ
- `rubocop` - ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯
- `bullet` - N+1ã‚¯ã‚¨ãƒªæ¤œå‡º
- `better_errors` + `binding_of_caller` - é–‹ç™ºç”¨ã‚¨ãƒ©ãƒ¼ãƒšãƒ¼ã‚¸

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
- **MVCã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ï¼ˆRailsæ¨™æº–ï¼‰
- **Namespaceåˆ¥ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼**ï¼ˆadmin, medical_staffï¼‰
- **å½¹å‰²ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**ï¼ˆRBACï¼‰
- **å¤šå¯¾å¤šé–¢é€£**ï¼ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ â†” å½¹å‰² â†” ç—…é™¢ï¼‰
- **æ‚£è€…ã‚¹ã‚¿ãƒƒãƒ•å‰²ã‚Šå½“ã¦**ï¼ˆæ‚£è€…ã¨åŒ»ç™‚å¾“äº‹è€…ã®é–¢é€£ç®¡ç†ï¼‰
- **Enumã‚’ä½¿ç”¨ã—ãŸæ¨©é™ãƒ¬ãƒ™ãƒ«ç®¡ç†**ï¼ˆgeneral/administratorï¼‰
- **Hotwire/Stimulusã‚’ä½¿ç”¨ã—ãŸå‹•çš„UIæ›´æ–°**

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
app/
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ admin/              # ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…æ©Ÿèƒ½
â”‚   â”œâ”€â”€ medical_staff/      # åŒ»ç™‚å¾“äº‹è€…æ©Ÿèƒ½
â”‚   â”œâ”€â”€ application_controller.rb
â”‚   â”œâ”€â”€ blood_pressure_records_controller.rb
â”‚   â”œâ”€â”€ charts_controller.rb
â”‚   â”œâ”€â”€ dashboard_controller.rb
â”‚   â”œâ”€â”€ hospitals_controller.rb
â”‚   â””â”€â”€ profiles_controller.rb
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ user.rb
â”‚   â”œâ”€â”€ role.rb
â”‚   â”œâ”€â”€ hospital.rb
â”‚   â”œâ”€â”€ blood_pressure_record.rb
â”‚   â”œâ”€â”€ user_hospital_role.rb
â”‚   â””â”€â”€ patient_staff_assignment.rb
â”œâ”€â”€ views/
â”‚   â”œâ”€â”€ admin/              # ã‚·ã‚¹ãƒ†ãƒ ç®¡ç†è€…ãƒ“ãƒ¥ãƒ¼
â”‚   â”œâ”€â”€ medical_staff/      # åŒ»ç™‚å¾“äº‹è€…ãƒ“ãƒ¥ãƒ¼
â”‚   â”œâ”€â”€ blood_pressure_records/
â”‚   â”œâ”€â”€ charts/
â”‚   â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ devise/             # Deviseèªè¨¼ãƒ“ãƒ¥ãƒ¼
â”œâ”€â”€ javascript/
â”‚   â”œâ”€â”€ application.js
â”‚   â””â”€â”€ controllers/        # Stimulusã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
â””â”€â”€ assets/
    â””â”€â”€ stylesheets/

config/
â”œâ”€â”€ routes.rb               # ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®š
â”œâ”€â”€ database.yml            # DBè¨­å®š
â”œâ”€â”€ importmap.rb            # JavaScript import map
â””â”€â”€ initializers/           # RailsåˆæœŸè¨­å®š

db/
â”œâ”€â”€ migrate/                # ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ schema.rb               # æœ€æ–°ã‚¹ã‚­ãƒ¼ãƒ
â””â”€â”€ seeds.rb                # åˆæœŸãƒ‡ãƒ¼ã‚¿

spec/                       # RSpecãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ models/
â”œâ”€â”€ controllers/
â”œâ”€â”€ views/
â””â”€â”€ factories/
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **Deviseèªè¨¼**: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰æš—å·åŒ–ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†
- **æ¨©é™ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡**: å„å½¹å‰²ã«å¿œã˜ãŸã‚¢ã‚¯ã‚»ã‚¹åˆ¶é™
- **CSRFå¯¾ç­–**: Railsæ¨™æº–ã®CSRFãƒˆãƒ¼ã‚¯ãƒ³
- **XSSå¯¾ç­–**: Railsæ¨™æº–ã®HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—

## ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯MITãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®ä¸‹ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

## è²¢çŒ®

1. Fork it
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## é€£çµ¡å…ˆ

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«é–¢ã™ã‚‹è³ªå•ã‚„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã¯ã€issueã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚
