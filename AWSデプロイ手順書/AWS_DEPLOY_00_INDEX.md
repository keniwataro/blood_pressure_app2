# AWSデプロイ手順 - 目次

## 概要

このガイドは、血圧管理アプリケーションをAWSにデプロイするための完全な手順書です。
AWS初心者の方でも、順番に進めていけばデプロイできるように詳細に記載しています。

---

## アーキテクチャ構成

```
ユーザー
  ↓
Route53（ドメイン管理）
  ↓
ALB（Application Load Balancer）
  ↓
ECS Fargate（Railsアプリケーション）
  ↓
RDS PostgreSQL（データベース）

静的ファイル → S3
監視 → CloudWatch
自動スケーリング → Auto Scaling
```

---

## デプロイ手順の流れ

### Part 1: 事前準備（所要時間: 30分）
- AWSアカウント設定
- IAMユーザー作成
- AWS CLIインストール
- 必要なツールのインストール

📄 **ファイル**: `AWS_DEPLOY_01_準備.md`

---

### Part 2: VPC・ネットワーク構築（所要時間: 20分）
- VPC作成
- サブネット作成
- インターネットゲートウェイ設定
- NATゲートウェイ設定
- セキュリティグループ作成

📄 **ファイル**: `AWS_DEPLOY_02_VPC構築.md`

---

### Part 3: RDS（PostgreSQL）構築（所要時間: 15分）
- DBサブネットグループ作成
- RDSインスタンス作成
- 接続情報の確認

📄 **ファイル**: `AWS_DEPLOY_03_RDS構築.md`

---

### Part 4: ECR・S3構築（所要時間: 30分）
- ECRリポジトリ作成
- S3バケット作成
- Dockerイメージのビルドとプッシュ

📄 **ファイル**: `AWS_DEPLOY_04_ECR_S3構築.md`

---

### Part 5: ECS（Fargate）構築（所要時間: 40分）
- ECSクラスター作成
- タスク定義作成
- ALB作成
- ECSサービス作成
- データベースマイグレーション

📄 **ファイル**: `AWS_DEPLOY_05_ECS構築.md`

---

### Part 6: Route53・AutoScaling設定（所要時間: 30分）
- Route53でドメイン設定
- AutoScaling設定
- CloudWatch監視設定
- 本番環境の最終調整

📄 **ファイル**: `AWS_DEPLOY_06_Route53_AutoScaling.md`

---

### Part 7: トラブルシューティング（必要時）
- よくある問題と解決方法
- ログの確認方法
- デバッグ手順
- ロールバック方法

📄 **ファイル**: `AWS_DEPLOY_07_トラブルシューティング.md`

---

## 推奨される進め方

### 初めてAWSを使う方
1. **Part 1から順番に進める**
   - 各手順を確実に実行してください
   - スクリーンショットを撮りながら進めると後で確認しやすいです

2. **各Partの最後で動作確認**
   - 次に進む前に、作成したリソースが正しく動作しているか確認

3. **問題が発生したら**
   - Part 7のトラブルシューティングを参照
   - CloudWatchログを確認
   - 焦らず一つずつ確認

### AWS経験者の方
- 必要な部分だけを参照して進めることも可能です
- ベストプラクティスに従った構成になっています

---

## 所要時間の目安

- **合計**: 約2.5〜3時間
- **初心者の場合**: 4〜5時間（確認時間含む）

---

## 必要な前提知識

### 必須
- 基本的なLinuxコマンド操作
- Dockerの基本的な使い方
- Railsアプリケーションの基本構造

### あると良い
- AWSの基本的な概念（VPC、EC2など）
- ネットワークの基礎知識
- SQLの基本

---

## 費用の目安

### 無料枠を使用した場合（月額）
- **RDS**: db.t3.micro（750時間/月無料）→ 無料
- **ECS Fargate**: 0.5 vCPU, 1GB（制限あり）→ 約$15〜30
- **ALB**: 1台 → 約$20
- **S3**: 5GB → 約$0.12
- **データ転送**: 1GB → 約$0.09
- **合計**: 約$35〜50/月

### 本番環境（推奨構成）
- **RDS**: db.t3.small → 約$30
- **ECS Fargate**: 複数タスク → 約$50〜100
- **ALB**: 1台 → 約$20
- **S3**: 10GB → 約$0.23
- **Route53**: ホストゾーン → 約$0.50
- **合計**: 約$100〜150/月

---

## 注意事項

### セキュリティ
- **本番環境では必ずHTTPSを使用**してください
- **データベースのパスワードは強力なものを設定**してください
- **IAMユーザーのアクセスキーは安全に管理**してください

### コスト管理
- **使用しないリソースは削除**してください
- **CloudWatchでコストアラートを設定**することを推奨します
- **定期的にAWS Cost Explorerで費用を確認**してください

### バックアップ
- **RDSの自動バックアップを有効化**してください
- **重要なデータは定期的にエクスポート**してください

---

## サポート

### 問題が発生した場合
1. Part 7のトラブルシューティングを確認
2. CloudWatchログを確認
3. AWSドキュメントを参照
4. GitHubのissueを作成

### 参考リンク
- [AWS公式ドキュメント](https://docs.aws.amazon.com/ja_jp/)
- [Rails Guides](https://guides.rubyonrails.org/)
- [Docker Documentation](https://docs.docker.com/)

---

## 次のステップ

準備ができたら、**Part 1: 事前準備**（`AWS_DEPLOY_01_準備.md`）から始めてください！

頑張ってください！ 🚀
