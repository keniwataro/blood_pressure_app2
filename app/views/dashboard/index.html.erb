<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="text-center mb-5">
      <h1 class="h2 mb-3">ようこそ、<%= current_user.name %>さん</h1>
      <p class="text-muted">利用する役割を選択してください</p>
    </div>

    <div class="card">
      <div class="card-header">
        <h4 class="mb-0">役割選択</h4>
      </div>
      <div class="card-body">
        <% if @hospital_roles.any? %>
          <% @hospital_roles.each do |hospital, user_hospital_roles| %>
            <div class="mb-4">
              <h5 class="mb-3">
                <i class="bi bi-building me-2"></i>
                <%= hospital.name %>
              </h5>
              <div class="row g-3">
                <% user_hospital_roles.each do |user_hospital_role| %>
                  <div class="col-12 col-md-6">
                    <%= button_to switch_role_path(user_hospital_role_id: user_hospital_role.id),
                                  method: :post,
                                  class: "btn btn-lg w-100 h-100 py-4 #{current_user.current_hospital_role_id == user_hospital_role.id ? 'btn-primary' : 'btn-outline-primary'}" do %>
                      <div class="d-flex flex-column align-items-center">
                        <% if user_hospital_role.role.is_medical_staff %>
                          <i class="bi bi-hospital fs-1 mb-3"></i>
                          <h5 class="mb-2"><%= user_hospital_role.role.name %></h5>
                          <p class="mb-0 small">医療従事者として利用</p>
                        <% else %>
                          <i class="bi bi-person fs-1 mb-3"></i>
                          <h5 class="mb-2"><%= user_hospital_role.role.name %></h5>
                          <p class="mb-0 small">患者として利用</p>
                        <% end %>
                        <% if current_user.current_hospital_role_id == user_hospital_role.id %>
                          <span class="badge bg-success mt-2">現在の役割</span>
                        <% end %>
                      </div>
                    <% end %>
                  </div>
                <% end %>
              </div>
            </div>
          <% end %>
        <% else %>
          <div class="text-center py-5">
            <p class="text-muted">利用可能な役割がありません。</p>
          </div>
        <% end %>
      </div>
    </div>

    <div class="mt-4 text-center">
      <% if current_user.current_hospital_role.present? %>
        <% if current_user.current_role_medical_staff? %>
          <%= link_to "医療従事者画面へ", medical_staff_root_path, class: "btn btn-success" %>
        <% else %>
          <%= link_to "患者画面へ", blood_pressure_records_path, class: "btn btn-info" %>
        <% end %>
      <% end %>
    </div>
  </div>
</div>
